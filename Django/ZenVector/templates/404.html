{% extends 'base.html' %}
{% load staticfiles%}
{% block content %}

    <figure class="item" style="text-align: center" data-aos="zoom-in-up" data-aos-offset="250" data-aos-easing="ease-in-sine">
    <br>
    <br>
    <br>
        <img src='{% static "/img/404_alien.png" %}' alt="" style="width: 50%;">
        <figcaption class="caption"><h4>Oh Hey there! You seem to have been abducted, but we saved you!</h4></figcaption>
    </figure>



      <div class="modal fade" id="PasswordResetModalPro" data-email="" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-signup" role="document">
          <div class="modal-content">
            <div class="card card-signup card-plain">
              <div class="modal-header">

                <h5 class="modal-title card-title">Change Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <i class="far fa-window-close" style="color: red"></i>

                </button>
              </div>
              <div class="modal-body">
                <div class="row">

                  <div class="col mr-auto">

                    <form  id='passwordResetFormPro' class="form"  >
                        {% csrf_token %}
                      <div class="card-body">
                        <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <div class="input-group-text">
                                    <i class="fas fa-heading"></i>
                              </div>
                            </div>
                            <input type="password" required id='first_password_Reset' value="" class="form-control" placeholder="Password...">
                          </div>
                            <label class="label_control" id="first_pass_control_Reset" style="display: none;">Password is 8 characters or more</label>
                        </div>

                      <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <div class="input-group-text">
                                    <i class="fas fa-heading"></i>
                              </div>
                            </div>
                            <input type="password" required id='second_password_Reset' value="" class="form-control" placeholder="Repeat password...">
                          </div>
                            <label class="label_control" id="second_pass_control_Reset" style="display: none;">Password's do not match...</label>
                        </div>


                      </div>
                      <div class="modal-footer justify-content-center">
                        <button type="submit"  class="btn btn-primary btn-round" >Change</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


       <div class="modal" tabindex="-1" role="dialog" id="CorrectChangePass">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="ModalMessageTitle" class="modal-title">Notification</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p id="ModelMessage">Password Has been changed successfully.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick='window.location.href = "http://127.0.0.1:8000/PutTogether"' data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>



{##}
{##}
{#    <div style="text-align: center">#}
{#        <div class="caption" style="display: inline-block">#}
{##}
{#        </div>#}
{#        <br>#}
{#    </div>#}
{#    <div style="text-align: center">#}
{#        <div class="abducted-user" style="display: inline-block; width: 50%;">#}
{#        </div>#}
{#    </div>#}

{% endblock %}


{% block scripts %}
{#    <script>#}
{#        {% if Available %}#}
{#            {% if not check %}#}
{#                   $(document).ready(function(){#}
{#                       let url = location.href.split("/");#}
{#                       var code = url[url.length - 1];#}
{#                       var email = url[url.length - 2];#}
{##}
{#                       if (location.href.includes("PasswordResetOut"))#}
{#                       {#}
{#                            $("#PasswordResetModalPro").attr("data-email",email);#}
{#                            $("#PasswordResetModalPro").attr("data-code",code);#}
{#                            $("#PasswordResetModalPro").modal("show");#}
{#                       }#}
{#                   });#}
{#                {% else %}#}
{#                document.getElementById("ModalMessageTitle").innerHTML = 'Warning';#}
{#                document.getElementById("ModelMessage").innerHTML = "The lik has already been used, Ask for a new link";#}
{#                $("#CorrectChangePass").modal("show");#}
{#             {% endif %}#}
{#        {% elif not Available %}#}
{#            document.getElementById("ModalMessageTitle").innerHTML = 'Warning';#}
{#            document.getElementById("ModelMessage").innerHTML = "Invalid Link, Please ask for a new link";#}
{#            $("#CorrectChangePass").modal("show");#}
{#        {% endif %}#}
{#    </script>#}
{##}
{#    <script>#}
{##}
{#        $("#passwordResetFormPro").off().on('submit',function (event) {#}
{#        event.preventDefault();#}
{#        var password_first = document.getElementById("first_password_Reset").value;#}
{#        var first_error = document.getElementById("first_pass_control_Reset");#}
{##}
{#        var password_second = document.getElementById('second_password_Reset').value;#}
{#        var second_error = document.getElementById("second_pass_control_Reset");#}
{##}
{#        var usr_email = $("#PasswordResetModalPro").attr("data-email");#}
{#        var code = $("#PasswordResetModalPro").attr("data-code");#}
{##}
{#        first_error.style.display = 'none';#}
{#        second_error.style.display = 'none';#}
{##}
{#        if ($.trim(password_first) === '' || $.trim(password_first).length < 8) {#}
{#            first_error.style.display = 'block';#}
{#            return false;#}
{#        }#}
{#        else if ($.trim(password_first) !== $.trim(password_second))#}
{#        {#}
{#            second_error.style.display = 'block';#}
{#            return false;#}
{#        }#}
{##}
{#        $.ajax({#}
{#            type: "POST",#}
{#            url: "/PutTogether/PasswordReset/",#}
{#            data: {password:password_first, email:usr_email, csrfmiddlewaretoken: csrftoken,#}
{#                   code:code},#}
{#            success: function () {#}
{#                $("#PasswordResetModalPro").modal("hide");#}
{#                $("#CorrectChangePass").modal("show");#}
{#            },#}
{#            error: function () {#}
{#                second_error.innerHTML = "Something went wrong, Try again";#}
{#                second_error.style.display = 'block';#}
{#            }#}
{#        });#}
{#    });#}
{##}
{##}
{#    $('#CorrectChangePass').on('hidden.bs.modal', function () {#}
{#        console.log("here");#}
{##}
{#    })#}
{##}
{#    </script>#}
    <script>
  AOS.init();
</script>

{% endblock %}
